From 7e9abb4bcb51c20b195469c6ae832b5154e5a772 Mon Sep 17 00:00:00 2001
From: parazyd <parazyd@dyne.org>
Date: Fri, 17 Mar 2017 12:30:20 +0100
Subject: [PATCH] patch

---
 src/extra/ipv4.c         | 1 +
 src/extra/ipv6.c         | 1 +
 src/extra/tcp.c          | 2 ++
 src/extra/udp.c          | 3 +++
 src/libnetfilter_queue.c | 1 +
 src/nlmsg.c              | 1 +
 6 files changed, 9 insertions(+)

diff --git a/src/extra/ipv4.c b/src/extra/ipv4.c
index d7f1f69..015268f 100644
--- a/src/extra/ipv4.c
+++ b/src/extra/ipv4.c
@@ -13,6 +13,7 @@
 #include <stdbool.h>
 #include <arpa/inet.h>
 #include <netinet/ip.h>
+#include <sys/types.h>
 
 #include <libnetfilter_queue/libnetfilter_queue.h>
 #include <libnetfilter_queue/libnetfilter_queue_ipv4.h>
diff --git a/src/extra/ipv6.c b/src/extra/ipv6.c
index 7c5dc9b..4bd0d08 100644
--- a/src/extra/ipv6.c
+++ b/src/extra/ipv6.c
@@ -14,6 +14,7 @@
 #include <stdbool.h>
 #include <arpa/inet.h>
 #include <netinet/ip6.h>
+#include <sys/types.h>
 
 #include <libnetfilter_queue/libnetfilter_queue.h>
 #include <libnetfilter_queue/libnetfilter_queue_ipv6.h>
diff --git a/src/extra/tcp.c b/src/extra/tcp.c
index 5318b07..65d094f 100644
--- a/src/extra/tcp.c
+++ b/src/extra/tcp.c
@@ -9,6 +9,8 @@
  * This code has been sponsored by Vyatta Inc. <http://www.vyatta.com>
  */
 
+#define _GNU_SOURCE
+
 #include <stdio.h>
 #include <string.h> /* for memcpy */
 #include <stdbool.h>
diff --git a/src/extra/udp.c b/src/extra/udp.c
index f0f6d2f..a2c3038 100644
--- a/src/extra/udp.c
+++ b/src/extra/udp.c
@@ -9,12 +9,15 @@
  * This code has been sponsored by Vyatta Inc. <http://www.vyatta.com>
  */
 
+#define _GNU_SOURCE
+
 #include <stdio.h>
 #include <stdbool.h>
 #include <arpa/inet.h>
 #include <netinet/ip.h>
 #include <netinet/ip6.h>
 #include <netinet/udp.h>
+#include <sys/types.h>
 
 #include <libnetfilter_queue/libnetfilter_queue.h>
 #include <libnetfilter_queue/libnetfilter_queue_udp.h>
diff --git a/src/libnetfilter_queue.c b/src/libnetfilter_queue.c
index 9fe9dfa..f7ba1b9 100644
--- a/src/libnetfilter_queue.c
+++ b/src/libnetfilter_queue.c
@@ -29,6 +29,7 @@
 #include <errno.h>
 #include <netinet/in.h>
 #include <sys/socket.h>
+#include <sys/types.h>
 
 #include <libnfnetlink/libnfnetlink.h>
 #include <libnetfilter_queue/libnetfilter_queue.h>
diff --git a/src/nlmsg.c b/src/nlmsg.c
index 6c4a139..98e4452 100644
--- a/src/nlmsg.c
+++ b/src/nlmsg.c
@@ -11,6 +11,7 @@
 #include <endian.h>
 #include <stdlib.h>
 #include <string.h>
+#include <sys/types.h>
 
 #include <libmnl/libmnl.h>
 
-- 
2.12.0

